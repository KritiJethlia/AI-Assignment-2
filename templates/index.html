<!DOCTYPE html>
<html>

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <title>Find your Conference!</title>
  <style>
    body{
      background-color: #ffffff;
    }
    .bootstrap-select:not([class*="col-"]):not([class*="form-control"]):not(.input-group-btn){
        width:500px;
    }
  </style>
</head>
<center>
<body>
<h1 class="mt-3">Journals and Conferences</h1>
<div class ="d-flex justify-content-between" style=" margin-right:100px;">
  <div class ="ms-2" style="height:50px; width:300px;">
    <label class ="mt-3" style="font-size: 35px;">Search</label>
  </div>
  <div style="margin-top:25px">
     <label  style="font-size: 20px;" id="user">Hi User!</label> 
    <a href="/" class="ms-5" style="font-size: 20px;" onclick="onlogout()"> Logout</a>
  </div>
</div>
<div class="mt-3 card" style="margin-left:100px; margin-right:100px;background-color:rgb(165, 207, 247);">
  <div class="d-flex justify-content-between m-3">
    <div>
      <label>Categories</label>
      <select class="selectpicker ml-3" multiple data-live-search="true" id="categories">
        {% for j in categories %}
              <option style="width: 300px;">{{j}}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label>Deadline within</label>
      <select class="selectpicker ml-3"  data-live-search="true" id="time">
        <option style="width: 240px;" selected>None</option>
        {% for j in [1,2,3,4,5,6,7,8,9,10,11,12] %}
              <option style="width: 240px;">{{j}}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label>Type</label>
      <select class="selectpicker ml-3"  data-live-search="true" id="type">
        {% for j in ["journal","conference"] %}
              <option style="width: 240px;">{{j}}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <button type="button" class="btn btn-primary mr-5" onclick="onsearch()" >Search</button>
    </div>

  </div>
</div>

<script>
  function setUser()
  {
    console.log(localStorage)
    document.getElementById("user").innerText = "Hi " + localStorage.getItem("username")+"!";
  }
  setUser()
  function onlogout()
  {
    localStorage.clear()
  }
  function onsearch()
  {
    var type = document.getElementById("type").selectedOptions[0].value; 
    var cat = document.getElementById("categories").selectedOptions;
    var categories =[]
    for(var i =0;i<cat.length;i++)
    {
      categories.push(cat[i].value)
    }
    var time = document.getElementById("time").selectedOptions[0].value;
    axios.post(' http://127.0.0.1:3000/calculate',{username : localStorage.getItem("username"),type: type, categories: categories, time: time})
    .then((res)=>
    {
      console.log("posted")
    });
  }
</script>


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
  crossorigin="anonymous"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"
  integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi"
  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"
  integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG"
  crossorigin="anonymous"></script>
</body>
</center>
</html>